function buildPhotoset(){var e=$(this).find("img").length,t=e*100,n=100/e;$(this).find("ul").width(t+"%");$(this).find("li").width(n+"%");$(this).find(".photoset-photoCount").html(e)}function advancePhotoset(){var e=$(this).find("li"),t=$(this).find("ul"),n=e.width(),r=t.width(),i=n/r*100,s=t.data("translated")||0,o=i+s,u="translate(-"+o+"%, 0)";if(s>=99-i){t.css({"-webkit-transform":"translate(0,0)","-moz-transform":"translate(0,0)",transform:"translate(0,0)"});t.data("translated",0)}else{t.css({"-webkit-transform":u,"-moz-transform":u,transform:u});t.data("translated",i+s)}}function toggleShare(){$(this).find(".post-shareButtons").toggleClass("is-visible");$(this).find(".fa-share").toggleClass("u-scaleOut");$(this).find(".fa-close").toggleClass("u-scaleOut")}function toggleLike(){var e=$(this).next(".post-like");e.find(".heart-empty").toggleClass("u-scaleOut");e.find(".heart-filled").toggleClass("u-scaleOut")}function loadComments(){$(this).remove();$(".post").append('<div id="disqus_thread"></div>');$.getScript("https://"+disqus_shortname+".disqus.com/embed.js")}function autoLoadComments(){if(location.href.indexOf("#disqus_thread")>=0){$(".post-showComments").click()}}function toggleSearch(){var e=$(".searchContainer"),t=$(".search"),n=$(".screen");e.addClass("is-visible");t.focus();n.addClass("is-visible")}function paginateSearch(e){var t=$(this).val().trim(),n="/search/"+t,r=$(".searchContainer-results"),i=$(".searchContainer-summary"),s=$(".searchContainer-more");if(t!=""){$.ajax(n).done(function(t){var o=$(t).find(".post"),u=$(t).find(".results");if(o.length>0){if(e.data.carousel){o.find(".photoset-wrapper").each(buildPhotoset);r.html(o)}else{r.html(o);$(".photoset-wrapper").photosetGrid({gutter:"3px"})}i.html(u);s.html('<a href="'+n+'">'+e.data.seeMore+"</a>");if(e.data.comments){$.getScript("https://"+disqus_shortname+".disqus.com/count.js")}}else{i.html(u);r.html("");s.html("")}})}}function toggleHeaders(){if($(window).width()<832){$(this).next().toggle();$(this).find(".fa").toggleClass("fa-caret-up fa-caret-down")}}function createModal(){var e=$('<div class="modal"><i class="fa fa-circle-o-notch fa-spin modal-spinner"></i></div>'),t=$("<img>").attr("src",$(this).data("highres"));$("body").append(e);$(".modal").fadeIn(300);t.load(function(){e.html(t)})}function removeModal(){$(this).fadeOut(300,function(){this.remove()})}function paginate(e,t,n,r,i,s){function a(){var t="";if(location.href.indexOf("/tagged/")>=0||location.href.indexOf("/search/")>=0){t=location.href+"/page/"+e}else{t="/page/"+e}return t}function f(e){if(t==="infiniteScroll"){e.html("")}else if(t==="loadMoreButton"){e.html(n)}}function l(t,n,l){l.html('<i class="fa fa-circle-o-notch fa-spin"></i>');$.ajax(a()).done(function(a){var c=$(a).find(".post");if(c.length>0){if(s){c.find(".photoset-wrapper").each(buildPhotoset);u.append(c)}else{u.append(c);$(".photoset-wrapper").photosetGrid({gutter:"3px"})}e++;if(i){$.getScript("https://"+disqus_shortname+".disqus.com/count.js")}f(l)}else{$(window).off(t,n);l.html(r);l.delay(3e3).fadeOut()}o=false})}function c(){if(!o&&$(window).scrollTop()>=$(document).height()-$(window).height()*3){o=true;l("scroll",c,$(".siteFooter"))}}function h(){if(!o){o=true;l("click",h,$(".siteFooter-loadMore"))}}function p(){if(t==="infiniteScroll"){$(window).on("scroll",c)}else if(t==="loadMoreButton"){$(".siteFooter-loadMore").on("click",h)}}var e=e+1,o=false,u=$(".posts"),t=t,n=n,r=r,i=i,s=s;p()}function closeScreen(){$(".searchContainer").removeClass("is-visible");$(".search").blur();$(".screen").removeClass("is-visible")}$("body").on("mouseover",".post-date",function(){$(this).html($(this).data("datetime"))}).on("mouseout",".post-date",function(){$(this).html($(this).data("timeago"))});$(".siteHeader h2").on("click",toggleHeaders);$(".screen").on("click",closeScreen)